# Shipment Service API

A production-ready backend service for managing shipments, built with **NestJS**, **Prisma ORM**, and **PostgreSQL**.
This service exposes a clean REST API to create, track, update, and cancel shipments.

---

## ğŸš€ Tech Stack

* **Node.js**
* **NestJS** â€“ application framework
* **Prisma ORM** â€“ database access layer
* **PostgreSQL** â€“ primary database
* **TypeScript**
* **Class Validator** â€“ request validation

---

## ğŸ“‚ Project Structure

```bash
shipment-service/
â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ schema.prisma
â”‚   â””â”€â”€ migrations/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â””â”€â”€ prisma.service.ts
â”‚   â”œâ”€â”€ shipments/
â”‚   â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”‚   â”œâ”€â”€ create-shipment.dto.ts
â”‚   â”‚   â”‚   â””â”€â”€ update-shipment.dto.ts
â”‚   â”‚   â”œâ”€â”€ shipments.controller.ts
â”‚   â”‚   â”œâ”€â”€ shipments.service.ts
â”‚   â”‚   â””â”€â”€ shipments.module.ts
â”‚   â”œâ”€â”€ app.module.ts
â”‚   â””â”€â”€ main.ts
â”œâ”€â”€ .env
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

---

## âš™ï¸ Environment Setup

### 1ï¸âƒ£ Clone the repository

```bash
git clone <repository-url>
cd shipment-service
```

---

### 2ï¸âƒ£ Install dependencies

```bash
npm install
```

---

### 3ï¸âƒ£ Configure environment variables

Create a `.env` file at the root of the project:

```env
DATABASE_URL="postgresql://username:password@localhost:5432/mydb"
```

Make sure PostgreSQL is running and the database exists.

---

### 4ï¸âƒ£ Run Prisma migrations

```bash
npx prisma migrate dev --name init_shipment_model
```

---

### 5ï¸âƒ£ Generate Prisma client

```bash
npx prisma generate
```

---

### 6ï¸âƒ£ Start the application

```bash
npm run start:dev
```

Server will start on:

```
http://localhost:3000
```

---

##  Domain Model

### Shipment

```ts
model Shipment {
  id             String         @id @default(uuid())
  trackingNumber String         @unique
  trackingCode   String         @unique
  carrier        String
  senderName     String
  receiverName   String
  origin         String
  destination    String
  status         ShipmentStatus @default(PENDING)
  createdAt      DateTime       @default(now())
  updatedAt      DateTime       @updatedAt
}
```

---

## ğŸ”— API Endpoints

Base URL:

```
/api/shipments
```

---

### â• Register a Shipment

**POST** `/api/shipments`

Creates a new shipment.

#### Request Body

```json
{
  "trackingCode": "ABC123456",
  "senderName": "John Doe",
  "receiverName": "Jane Smith",
  "origin": "Lagos",
  "destination": "Abuja",
  "status": "PENDING"
}
```

#### Notes

* `trackingNumber` is auto-generated by the system
* `carrier` defaults to **DHL** if not provided

#### Response (201)

```json
{
  "id": "uuid",
  "trackingNumber": "TRK000123",
  "trackingCode": "ABC123456",
  "carrier": "DHL",
  "senderName": "John Doe",
  "receiverName": "Jane Smith",
  "origin": "Lagos",
  "destination": "Abuja",
  "status": "PENDING",
  "createdAt": "2026-01-27T10:00:00.000Z",
  "updatedAt": "2026-01-27T10:00:00.000Z"
}
```

---

### ğŸ“„ List All Shipments

**GET** `/api/shipments`

Returns all shipments ordered by newest first.

#### Response (200)

```json
[
  {
    "id": "uuid",
    "trackingNumber": "TRK000123",
    "trackingCode": "ABC123456",
    "carrier": "DHL",
    "senderName": "John Doe",
    "receiverName": "Jane Smith",
    "origin": "Lagos",
    "destination": "Abuja",
    "status": "PENDING",
    "createdAt": "2026-01-27T10:00:00.000Z",
    "updatedAt": "2026-01-27T10:00:00.000Z"
  }
]
```

---

### ğŸ” Get Shipment by ID

**GET** `/api/shipments/:id`

Fetch a single shipment using its UUID.

#### Path Parameter

| Name | Type   | Description   |
| ---- | ------ | ------------- |
| id   | string | Shipment UUID |

#### Response (200)

```json
{
  "id": "uuid",
  "trackingNumber": "TRK000123",
  "trackingCode": "ABC123456",
  "carrier": "DHL",
  "senderName": "John Doe",
  "receiverName": "Jane Smith",
  "origin": "Lagos",
  "destination": "Abuja",
  "status": "PENDING",
  "createdAt": "2026-01-27T10:00:00.000Z",
  "updatedAt": "2026-01-27T10:00:00.000Z"
}
```

#### Error (404)

```json
{
  "statusCode": 404,
  "message": "Shipment with ID <id> not found"
}
```

---

### âœï¸ Update Shipment

**PUT** `/api/shipments/:id`

Updates shipment details.

#### Request Body (Partial)

```json
{
  "destination": "Port Harcourt",
  "status": "IN_TRANSIT"
}
```

#### Response (200)

Returns the updated shipment object.

---

### âŒ Cancel Shipment

**DELETE** `/api/shipments/:id`

Deletes a shipment permanently.

#### Response (200)

Returns the deleted shipment object.

---

## ğŸ§ª Validation Rules

* All incoming requests are validated using `class-validator`
* Invalid payloads return `400 Bad Request`
* Non-existent resources return `404 Not Found`

---

## ğŸ“Œ Future Improvements

* Authentication & Authorization
* Shipment status history
* Pagination & filtering
* Swagger/OpenAPI documentation
* Soft deletes
* Event-driven notifications

